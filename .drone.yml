volumes:
  - v1:
    name: v1
    type: bind
    source: /data
    destination: /drone
workspace:
  base: /drone/src
  path: /${DRONE_REPO}/${DRONE_BRANCH}
clone:
  git:
    image: plugins/git
  git2:
    image: plugins/git
    commands:
      - df
      - echo ${DRONE_PREV_COMMIT_SHA} ${DRONE_COMMIT_SHA}
      - git diff --name-status ${DRONE_PREV_COMMIT_SHA}..${DRONE_COMMIT_SHA} 2>&1
pipeline:
  test-prep:
    image: mongo
    commands:
    #- mongoimport --db test_db --collection widgets --type json --file seed.json --jsonArray
    - ls
  test:
    image: mongo
    commands:
    #- mongo --eval "db.widgets.find({});" test_db
    - pwd

services:
  mongo:
    image: mongo
